[
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html",
    "title": "Take-Home_Ex01",
    "section": "",
    "text": "This exercise aims to discover the demographic, financial characteristics and hidden patterns of the City of Engagement, using static and interactive statistical graphics methods. The data will be processed using appropriate tidyverse packages and visualization will be designed using ggplot2 and its extensions."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#install-and-launching-r-packages",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#install-and-launching-r-packages",
    "title": "Take-Home_Ex01",
    "section": "3.1 Install and launching R packages",
    "text": "3.1 Install and launching R packages\nThe code chunk below uses p_load() of pacman package to check if packages are installed in the computer. If they are, then they will be launched into R. The R packages installed are:\n\nplotly: R library for plotting interactive statistical graphs.\nggstatsplot: Used for creating graphics with details from statistical tests.\ngganimate: an ggplot extension for creating animated statistical graphs.\ngifski: converts video frames to GIF animations using pngquant’s fancy features for efficient cross-frame palettes and temporal dithering. It produces animated GIFs that use thousands of colors per frame.\nknitr: Used for dynamic report generation\npatchwork: Used to combine plots\nggdist: Used for visualization distribution and uncertainty\nggthemes: Provide additional themes for ggplot2\nggrepel: A package in R used for avoiding overplotting of text labels\ngt:For creating and styling publication-quality tables in R\nrstatix: Used for statistical analysis and data visualization\nggridges: For creating ridge plots\nviridis: An R package that provides a set of color palettes for data visualization\nggiraph: For making ‘ggplot’ graphics interactive\nreshape2: Provides functions for transforming and reshaping data between “wide” and “long” formats\nscales: Provides a set of functions for formatting and labeling data for visualization\ntidyverse: A family of modern R packages specially designed to support data science, analysis and communication task including creating static statistical graphs.\n\n\npacman::p_load(plotly, ggstatsplot, knitr, patchwork, ggdist, ggthemes,ggrepel, tidyverse,gt,rstatix,ggpmisc,ggridges,gganimate,viridis,ggiraph,reshape2,scales, performance,ggalt,ggpubr)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#importing-the-data",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#importing-the-data",
    "title": "Take-Home_Ex01",
    "section": "3.2 Importing the Data",
    "text": "3.2 Importing the Data\n\nparticipants <- read_csv(\"data/Participants.csv\")\nfinancial <- read_csv(\"data/FinancialJournal.csv\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#data-wrangling",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#data-wrangling",
    "title": "Take-Home_Ex01",
    "section": "3.3 Data Wrangling",
    "text": "3.3 Data Wrangling\n\n3.3.1 Check for missing values in each column in the participants and financial data\n\n# Check for missing values in each column in participants data\ncolSums(is.na(participants))\n\n participantId  householdSize       haveKids            age educationLevel \n             0              0              0              0              0 \n interestGroup      joviality \n             0              0 \n\n# Check for missing values in each column\ncolSums(is.na(financial))\n\nparticipantId     timestamp      category        amount \n            0             0             0             0 \n\n\n\n\n3.3.2 Data Issues\nUsing glimpse(), we can look at the data types of the datasets.\n\nglimpse(participants)\n\nRows: 1,011\nColumns: 7\n$ participantId  <dbl> 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1…\n$ householdSize  <dbl> 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3…\n$ haveKids       <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, T…\n$ age            <dbl> 36, 25, 35, 21, 43, 32, 26, 27, 20, 35, 48, 27, 34, 18,…\n$ educationLevel <chr> \"HighSchoolOrCollege\", \"HighSchoolOrCollege\", \"HighScho…\n$ interestGroup  <chr> \"H\", \"B\", \"A\", \"I\", \"H\", \"D\", \"I\", \"A\", \"G\", \"D\", \"D\", …\n$ joviality      <dbl> 0.001626703, 0.328086500, 0.393469590, 0.138063446, 0.8…\n\n\n\nglimpse(financial)\n\nRows: 1,513,636\nColumns: 4\n$ participantId <dbl> 0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6,…\n$ timestamp     <dttm> 2022-03-01, 2022-03-01, 2022-03-01, 2022-03-01, 2022-03…\n$ category      <chr> \"Wage\", \"Shelter\", \"Education\", \"Wage\", \"Shelter\", \"Educ…\n$ amount        <dbl> 2472.50756, -554.98862, -38.00538, 2046.56221, -554.9886…\n\n\nISSUE 1: WRONG DATA FORMAT\nparticipantId is in <dbl> format. It needs to be converted to <chr>.\n\nparticipants$participantId <- as.character(participants$participantId)\n#str(participants)--> to check if data type has been changed\n\nfinancial$participantId <- as.character(financial$participantId)\n#str(financial) --> to check if data type has been changed\n\nISSUE 2: CHANGE TIMESTAMP TO MONTH_YEAR FORMAT\nExtract the month and year using lubridate.\n\nfinancial$month_year <- floor_date(as.POSIXct(financial$timestamp), unit = \"month\")\nfinancial$month_year <- format(financial$month_year, format = \"%m/%Y\")\n\n# Convert month_year to date format\nfinancial$month_year <- as.Date(paste0(\"01/\", financial$month_year), format = \"%d/%m/%Y\")\n\n#head(financial) --> check if new col month_year is created \n\nISSUE 3: DUPLICATES FOUND IN DATA\nCheck for duplicates in both dataset using the following code chunk,\n\n#Check for duplicates in financial table\nsum(duplicated(financial))\n\n[1] 1113\n\n#Check for duplicates in participants table\nsum(duplicated(participants))\n\n[1] 0\n\n#Remove duplicates in financial table\nfinancial_unique <- distinct(financial)\nnrow(financial_unique)\n\n[1] 1512523\n\n\nISSUE 4: DATA IS SEGREGATED BY INDIVDUAL ENTRIES\nGroup the entries by participants taking into consideration month_year and category and summing up the amount.\n\n# Group by participant_id and month_year, subgroup by category, then summarize by amount\nnew_financial <- financial_unique %>%\n  group_by(participantId, month_year, category) %>%\n  summarise(total_amount = sum(amount)) %>%\n  mutate(total_amount = round(total_amount, 2))\n\n# Pivot the table so that the categories appear as columns\nnew_financial_wide <- new_financial %>% \n  pivot_wider(names_from = category, values_from = total_amount)\n\nNext, check if columns have missing value, if yes, replace the missing values with 0\n\n# Check if any columns has missing value \ncolSums(is.na(new_financial_wide))\n\n participantId     month_year      Education           Food     Recreation \n             0              0           7673              0           1199 \n       Shelter           Wage RentAdjustment \n           131              0          10619 \n\n# replace missing values with 0\nnew_financial_wide <- new_financial_wide %>% \n  mutate_all(~replace_na(., 0))\n\nISSUE 5: DATA DOES NOT SHOW FINANCIAL HEALTH AND COST OF LIVING\nFinancial Health = Sum (Wage + Education + Shelter + Recreation + Food + RentAdjustment)\n\nnew_financial_wide$Financial_health <- rowSums(new_financial_wide[, c(\"Wage\", \"Education\",\"Shelter\",\"Recreation\",\"Food\",\"RentAdjustment\" )], na.rm = TRUE)\n\nCost_of_living = Sum(Education + Shelter + Recreation + Food)\n\nnew_financial_wide$Cost_of_living <- rowSums(new_financial_wide[,c(\"Education\",\"Shelter\",\"Recreation\",\"Food\")], na.rm = TRUE)\nnew_financial_wide$Cost_of_living <- new_financial_wide$Cost_of_living * -1\n\nISSUE 6: AGE DATA ARE NOT AGGREGATED\nBin age data by groups of 10.\n\nparticipants <- participants %>%\n  mutate(age_bin = cut(age, \n                       breaks = c(seq(max(age), min(age) - 10, -10), min(age)), \n                       right = FALSE, \n                       include.lowest = TRUE, \n                       labels = NULL))\n\n# Replace the numeric bin labels with age ranges\nparticipants$age_bin <- sub(\"(\\\\d+)-(\\\\d+)\", \"\\\\1-\\\\2\", as.character(participants$age_bin))\nparticipants$age_bin[participants$age_bin == paste0(max(participants$age_bin), \"-\")] <- paste0(\"<= \", max(as.numeric(levels(participants$age_bin)))-1)\n\n# Display the first 10 rows of the new data frame with age_bin column\n#head(participants, 10)\n\nISSUE 7: PARTICIPANTS DATA AND FINANCIAL DATA ARE SEPARATED\nCombine the two tables together by participantId\n\ncombined_table <- merge(participants, new_financial_wide, by = \"participantId\")\nDT::datatable(combined_table, class= \"compact\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#demographic-analysis",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#demographic-analysis",
    "title": "Take-Home_Ex01",
    "section": "4.1 Demographic Analysis",
    "text": "4.1 Demographic Analysis\n\n4.1.1 Distribution of Income and Age\n\nDistribution of Income\nWe will first take a look at the Income Distribution using histogram and boxplot.\nBased on the boxplot plotted, we can observe that the minimum income is $1600, which means that all the participants are considering under the working population and we can analyse them as a whole.\nFurthermore, we can observe from the shape of the wage distribution that there is income inequality in the city. It has a right-skewed distribution, i.e. mean wage > median wage, where there is very few high earners at the top and majority falls under the middle and bottom.\n\n\nShow the code\n#computing summary statistics of mean, median and lower and upper whiskers in boxplot\nwage_mean <- round(mean(combined_table$Wage))\nwage_median <- round(median(combined_table$Wage))\nymax <- as.numeric(round((IQR(combined_table$Wage)*1.5) +\n                quantile(combined_table$Wage,0.75)))\nymin <- as.integer(min(combined_table$Wage))\n\n#plotting histogram\nh_wage <- ggplot(data = combined_table, aes(x = Wage)) + \n  geom_histogram(color=\"black\", fill=\"azure4\", binwidth = 500) + \n  scale_x_continuous(limits = c(0,25000), labels = scales::comma) +\n  labs(x = \"Wage\", y = \"Number of participants\") +\n  geom_vline(aes(xintercept = wage_mean), col=\"darkblue\", linewidth=0.75) +\n  annotate(\"text\", x=5900, y=1700, label=\"Mean wage:\", \n           size=3, color=\"darkblue\") +\n  annotate(\"text\", x=5600, y=1550, label=format(wage_mean, big.mark = \",\"),\n           size=3, color=\"darkblue\") +\n  geom_vline(aes(xintercept = wage_median), col=\"lightpink4\", linewidth=0.75) +\n  annotate(\"text\", x=1900, y=1700, label=\"Median wage\", \n           size=3, color=\"lightpink4\") +\n  annotate(\"text\", x=1900, y=1600, label=format(wage_median, big.mark = \",\"),\n           size=3, color=\"lightpink4\") +\n  theme(axis.text.x = element_text(size=8))\n\n#plotting boxplot\nb_wage <- ggplot(data = combined_table, aes(y = Wage)) + \n  geom_boxplot(outlier.colour=\"firebrick\", outlier.shape=16,\n               outlier.size=0.6, notch=FALSE, width = 0.25) + \n  coord_flip() + labs(y = \"\", x = \"\") + \n  scale_y_continuous(limits = c(0,25000), labels = scales::comma) +\n  theme(axis.text = element_blank(), axis.ticks = element_blank()) + \n  stat_boxplot(geom=\"errorbar\", width=0.25) + \n  annotate(\"text\", x=0.20, y=ymax, label=format(ymax, big.mark = \",\"), \n           size=3, color=\"lightpink4\") +\n  annotate(\"text\", x=0.20, y=ymin, label=format(ymin, big.mark = \",\"), \n           size=3, color=\"lightpink4\") +\n  annotate(\"text\", x=-0.25, y=5000, label=format(wage_median, big.mark = \",\"),\n           size=3, color=\"lightpink4\") +\n  annotate(\"text\", x=-0.25, y=2500, label=\"Median wage =\",\n           size=3, color=\"lightpink4\")\n\n# combine the 2 plots \n\nwage_distri <- b_wage / h_wage + plot_layout(heights = c(1, 2)) \n\nwage_distri + plot_annotation(title = \"Distribution of Wage\", \n                               subtitle = str_wrap(\"There is a right-skewed distribution i.e. mean wage > median wage. There is also a large number of outliers (wage >$9,110).\", width =60),\n                               theme = theme(\n                                 plot.title = element_text(size = 18),\n                                 plot.subtitle = element_text(size = 12)))\n\n\n\n\n\nTo confirm that the wage distribution is indeed not normally distributed, we will perform the normality assumption test. But before performing the normality assumption test, we will first create the meanwage_table as shown in the code chunk below,\n\n# Create mean wage table \nmeanwage_table <- combined_table %>%\n  group_by(participantId) %>%\n  summarize(mean_wage = mean(Wage))\n#head(meanwage_table)\n\nNext, we will use the Q-Q Plot to visualize if normal distribution exist.\n\n\nShow the code\n#| echo: false\n#| fig-width: 3\n#| fig-height: 3\n\nqq <- ggplot(meanwage_table,\n       aes(sample=mean_wage))+\n  stat_qq() +\n  stat_qq_line() +\n  ggtitle(\"Normal Q-Q Plot of Income\")\n\nsw_t <- meanwage_table %>%\n  shapiro_test(mean_wage) %>%\n  gt() #make it to gt format to give a nice table\n\ntmp <- tempfile(fileext = '.png')\ngtsave(sw_t, tmp)\ntable_png <- png::readPNG(tmp,native=TRUE) #sw_t cant be recognised by patchwork so change it to png\n\nqq + table_png\n\n\n\n\n\nLooking at Normal Quartile Plot (Q-Q plot), we can see that the points deviate significantly from the straight diagonal line. The results of the Shaprio-test above also suggest that there is sufficient statistical evidence to reject the null hypothesis at 95% confidence. Thus, the set of data is indeed not normally distributed, showing that the city has income inequality.\n\n\nDistribution of Age\nSimilarly, we will use histogram and boxplot to show the age distribution.\nThe boxplot below shows that the minimum age is 18 and the maximum age is 60, which is most likely the retirement age. The histogram shows that the age is normally distributed,where the mean age equals the median age of 39. Thus, it appears that the city of engagement does not need to worry about aging population, which in turn meant that they do not need to invest in improving birth rate.\nHowever, based on the pie chart, we can see that though the starting age is 18, only 5% of the working population is below the age of 21. This is probably because most are still studying at thar age and are not actively working.\n\n\nShow the code\nage_count <- combined_table %>%\n  group_by(age_bin) %>%\n  summarize(\n    count = n_distinct(participantId)) %>% \n  mutate(prop_count = as.numeric(count) / n_distinct(as.numeric(combined_table$participantId)),\n         age_pie_pct = round(prop_count * 100)) %>% \n  mutate(ypos_p = rev(cumsum(rev(age_pie_pct))),\n         pos_p = age_pie_pct/2 + lead(ypos_p, 1, default = 0),\n         pos_p = if_else(is.na(pos_p), age_pie_pct/2, pos_p))\n\npie_age <- ggplot(age_count, aes(x = \"\" , y = age_pie_pct, fill = fct_inorder(age_bin))) +\n  geom_col(width = 1, color = 1) +\n  coord_polar(theta = \"y\") +\n  scale_fill_brewer(palette = \"YlGnBu\") +\n  geom_label_repel(data = age_count,\n                   aes(y = pos_p, label = paste0(age_pie_pct, \"%\")),\n                   size = 4.5, nudge_x = 1, color = c(1, 1, 1, 1, 1), show.legend = FALSE) +\n  guides(fill = guide_legend(title = \"Age Bin\")) +\n  labs(title = \"Proportion of participants in each Age Bin\") +\n  theme(legend.position = \"bottom\",\n        plot.title = element_text(face = \"bold\")) +\n  theme_minimal() \n\n\n\n\nShow the code\n#computing summary statistics of mean, median and lower and upper whiskers in boxplot for AGE\nage_mean <- round(mean(combined_table$age))\nage_median <- round(median(combined_table$age))\nymax <- max(combined_table$age)\nymin <- as.integer(min(combined_table$age))\n\n#plotting histogram for AGE\nh_age <- ggplot(data = combined_table, aes(x = age)) + \n  geom_histogram(color=\"black\", fill=\"azure4\", binwidth = 4) + \n  scale_x_continuous(limits = c(0,70), labels = scales::comma) +\n  labs(x = \"Age\", y = \"Number of participants\") +\n  geom_vline(aes(xintercept = age_mean), col=\"black\", linewidth=0.75) +\n  annotate(\"text\", x=48, y=1700, label=\"Mean age:\", \n           size=3, color=\"black\") +\n  annotate(\"text\", x=48, y=1600, label=format(age_mean, big.mark = \",\"),\n           size=3, color=\"black\") +\n  geom_vline(aes(xintercept = age_median), col=\"black\", linewidth=0.75) +\n  annotate(\"text\", x=30, y=1750, label=\"Median age:\", \n           size=3, color=\"black\") +\n  annotate(\"text\", x=30, y=1650, label=format(age_median, big.mark = \",\"),\n           size=3, color=\"black\") +\n  theme(axis.text.x = element_text(size=8))\n\n#plotting boxplot for AGE\nb_age <- ggplot(data = combined_table, aes(y = age)) + \n  geom_boxplot(outlier.colour=\"firebrick\", outlier.shape=16,\n               outlier.size=1, notch=FALSE, width =0.2) + \n  coord_flip() + labs(y = \"\", x = \"\") + \n  scale_y_continuous(limits = c(0,70), labels = scales::comma) +\n  theme(axis.text = element_blank(), axis.ticks = element_blank()) + \n  stat_boxplot(geom=\"errorbar\", width=0.2) + \n  annotate(\"text\", x=0.15, y=ymax, label=format(ymax, big.mark = \",\"), \n           size=3, color=\"lightpink4\") +\n  annotate(\"text\", x=0.15, y=ymin, label=format(ymin, big.mark = \",\"), \n           size=3, color=\"lightpink4\") \n  #annotate(\"text\", x=-0.25, y=50, label=format(age_median, big.mark = \",\"),\n           #size=3, color=\"lightpink4\") \n  #annotate(\"text\", x=-0.25, y=25, label=\"Median age =\",\n           #size=3, color=\"lightpink4\")\n\nage_distri <- b_age / h_age + plot_layout(heights = c(1, 2)) \n\n# age_distri + plot_annotation(title = \"Distribution of Age\", \n#                                subtitle = \"There is a normal distribution i.e. mean age = median age\",\n#                                theme = theme(\n#                                  plot.title = element_text(size = 18),\n#                                  plot.subtitle = element_text(size = 12)))\n\n\n\n\nShow the code\n#combine the age_distri plot dervied earlier with the pie_age plot\nage_distri_pie <- (age_distri | pie_age) + plot_layout(widths = c(3,3))\n\nage_distri_pie + plot_annotation(title = \"Distribution of Age\", \n                               theme = theme(\n                                 plot.title = element_text(size = 16)))\n\n\n\n\n\n\n\n\n4.1.2 Income by Age\nLet’s find out if income is affected by age.\nTo compare the income level across ages, we will test the following null hypothesis:\nH0: the mean wage across different age groups are the same\nH1: the mean wage across different age groups are different\nTo start the confirmatory data analysis, we first perform the normality assumption test for the distribution of income and age. Normality assumption test for income has been performed previously.\nPlot the qqplot for income and age.\n\n\nShow the code\n#| echo: false\n#| fig-width: 3\n#| fig-height: 3\n\n# Create age table \nunique_participants <- unique(subset(combined_table, select = c(\"participantId\", \"age\")))\nhead(unique_participants)\n\n\n   participantId age\n1              0  36\n13             1  25\n25            10  48\n37           100  29\n49          1000  56\n61          1001  49\n\n\nShow the code\nqq_age <- ggplot(unique_participants,\n       aes(sample=age))+\n  stat_qq() +\n  stat_qq_line() +\n  ggtitle(\"Normal Q-Q Plot of Age\")\n\nsw_t_age <- unique_participants %>%\n  shapiro_test(age) %>%\n  gt() #make it to gt format to give a nice table\n\ntmp_age <- tempfile(fileext = '.png')\ngtsave(sw_t_age, tmp_age)\ntable_png_age <- png::readPNG(tmp_age,native=TRUE) #sw_t cant be recognised by patchwork so change it to png\n\n(qq_age + table_png_age) / (qq + table_png)\n\n\n\n\n\nBased on the Shapiro test, both the p-value are < alpha value of 0.05, thus there is sufficient statistical evidence to conclude that the distribution of income and age are not normally distributed. Thus we will perform the non-parametric test, Oneway ANOVA Test.\n\n\nShow the code\nggbetweenstats(\n  data = combined_table,\n  x = age_bin, \n  y = Wage,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"ns\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  ylim = c(0, 25000)\n) +\nggtitle(\"Oneway ANNOVA - Income across different age\")\n\n\n\n\n\nThe Kruskal-Wallis Test p-value is lower than the alpha values, thus there is sufficient statistical evidence to reject the null hypothesis and infer that the mean income across age is not the same.\nWe can observe that there are few pairs of age_bin with p-value > 0.05 such as [40,50) and [50,60]. This suggests that the differences between the medians of the pair are not statistically significant.\nWe can also observe that there is a higher wage median for those age 30-40. After the age of 40, it seems that the increase in age is not consistent with the increase in wage. The 2 highest wage level are from the opposite ends of the age spectrum. Though these are outliers, it suggests that age is not the limiting factor for high wage tier. It does not necessary mean that an individual has to be older to earn a higher income.\n\n\n4.1.3 Financial Health Observation\n\nCumulative Financial Health\nCreate a table to plot the cumulative financial health to see if there are cumulative savings in the city.\n\n# Create a data frame\ndf_totalfh <- combined_table %>%\n  group_by(month_year) %>%\n  summarise(total_fh = sum(Financial_health))\n\n#head(df_totalfh)\n\n\n\nShow the code\n# calculate cumulative financial health\ndf_totalfh <- df_totalfh %>% \n  mutate(cumulative_fh = cumsum(total_fh))\n\nhead(df_totalfh)\n\n\n# A tibble: 6 × 3\n  month_year total_fh cumulative_fh\n  <date>        <dbl>         <dbl>\n1 2022-03-01 4832812.      4832812.\n2 2022-04-01 2204851.      7037663.\n3 2022-05-01 2403220.      9440883.\n4 2022-06-01 2421291.     11862173.\n5 2022-07-01 2272492.     14134666.\n6 2022-08-01 2574129.     16708794.\n\n\nShow the code\n# Calculate y-axis breaks and labels\ny_breaks <- pretty_breaks(n = 3)(range(df_totalfh$cumulative_fh))\ny_labels <- dollar_format(prefix = \"$\")(y_breaks)\n\n# plot graph\nggplot(data = df_totalfh, aes(x = month_year, y = cumulative_fh)) +\n  geom_line() +\n  labs(x = \"Month/Year\", y = \"Cumulative Financial Health\", title = \"Cumulative Financial Health Over Time\") +\n  stat_summary(geom = \"line\", fun = \"cumsum\", linetype = \"dashed\") +\n  scale_y_continuous(breaks = y_breaks, labels = y_labels) +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%m/%Y\") +\n  theme(plot.title = element_text(face = \"bold\"),\n        plot.margin = unit(c(0.5, 0.5, 0.5, 0.5), \"cm\"))\n\n\n\n\n\nFrom the figure above, we can see that the city has cumulative savings across the months.\nDiving deeper into the financial health of the participants, we will plot the boxplot of the Financial Health vs Mean Financial Health. Based on the plot below, we can see that the mean of the financial health is at the highest in March 2022 at around $4800 and decreased significantly in April 2022. Between April 2022 to Feb 2023, financial health was maintained between $2,500 to $3,000.\n\n\nShow the code\np_fh <- ggplot(data = combined_table, aes(x = month_year, y = Financial_health, \n                                      tooltip = month_year)) +\n  geom_boxplot() +\n  geom_point(stat = \"summary\", fun.y = \"mean\", colour = \"red\", size = 1) +\n  geom_line(stat = \"summary\", fun.y = \"mean\", colour = \"red\", size = 0.5) +\n  theme_minimal() +\n  scale_fill_brewer(palette = \"Dark2\") +\n  labs(title = \"Financial Health Over Time\",\n       y = \"Financial Health\",\n       x = \"Month/Year\") +\n  theme(plot.title = element_text(hjust = 0.2, size = 12, face = 'bold'),\n        plot.margin = margin(20, 20, 20, 20),\n        legend.position = \"bottom\",\n        axis.text = element_text(size = 8, face = \"bold\"),\n        axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 1),\n        axis.title.x = element_text(hjust = 0.5, size = 12, face = \"bold\"),\n        axis.title.y = element_text(hjust = 0.5, size = 12, face = \"bold\")) +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%b-%Y\")\n\nggplotly(p_fh, tooltip = c(\"x\", \"y\", \"tooltip\"))\n\n\n\n\n\n\nTo find out if financial health is affected by wage or cost of living, we correlogram to see the correlation between financial health and wage, cost of living and the various expense category. Based on the correlation table and the significant test of correlation, we can see that financial health and wage has a strong positive correlation of 0.98 , while cost of living has low negative correlation of -0.14.\nBased on the correlogram below, we can also observe that there Recreation and Shelter has a high correlation with Cost of living.\n\n\nShow the code\n# Select columns by name for the correlation matrix\ncols <- c( \"Wage\", \"Financial_health\", \"Cost_of_living\", \"Food\", \"Shelter\", \"Recreation\", \"Education\", \"RentAdjustment\")\n\n# Plot the ggcorrmat\nggstatsplot::ggcorrmat(\n  data = combined_table, \n  cor.vars = cols, hc.order = TRUE, p.mat=p.mat,\n  title = \"Financial Health Correlation Table\")\n\n\n\n\n\n\nWage CorrelationCost of Living Correlation\n\n\n\n\nShow the code\nggscatterstats(\n  data = combined_table,\n  x = Wage,\n  y = Financial_health,\n  marginal = FALSE,\n  )\n\n\n\n\n\n\n\n\n\nShow the code\nggscatterstats(\n  data = combined_table,\n  x = Cost_of_living,\n  y = Financial_health,\n  marginal = FALSE,\n  )\n\n\n\n\n\n\n\n\nTo further explore each expense category over time, we will plot the different expense category over time.\n\n\nShow the code\n# group the expenses by month year\nexpenses_grouped <- combined_table %>%\n  group_by(month_year) %>%\n  summarize(total_recreation = mean(Recreation),\n            total_food = mean(Food),\n            total_shelter = mean(Shelter),\n            total_education = mean(Education))\n\n# plot the data using ggplot2\np_expense <- ggplot(expenses_grouped, aes(x = month_year)) + \n  geom_line(aes(y = total_recreation, color = \"Recreation\")) +\n  geom_line(aes(y = total_food, color = \"Food\")) +\n  geom_line(aes(y = total_shelter, color = \"Shelter\")) +\n  geom_line(aes(y = total_education, color = \"Education\")) +\n  labs(x = \"Month/Year\", y = \"Mean Expenses($)\") +\n  scale_y_continuous(limits = c(-1000, 0), \n                      breaks = seq(-1000, 0, 2*100),\n                      labels = dollar_format(prefix = \"$\")) +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%m/%Y\") +\n  ggtitle(\"Expenses Over time\") +\n  scale_color_manual(values = c(\"Recreation\" = \"red\", \n                                \"Food\" = \"blue\", \n                                \"Shelter\" = \"green\", \n                                \"Education\" = \"purple\")) +\n  theme(plot.title = element_text(face = \"bold\"),\n        axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 0.5)) \n\n\nAlso, we shall plot the wage over time to compare it with the expenses over time plot.\n\n\nShow the code\n# group the wage by month year\nwage_grouped <- combined_table %>%\n  group_by(month_year) %>%\n  summarize(mean_wage_bymonth = mean(Wage))\n\n# plot the data using ggplot2\np_meanwage <- ggplot(wage_grouped, aes(x = month_year)) + \n  geom_line(aes(y = mean_wage_bymonth)) +\n  labs(x = \"Month/Year\", y = \"Mean Wage($)\") +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%m/%Y\") +\n  ggtitle(\"Expenses by Month/Year\") +\n  theme(plot.title = element_text(face = \"bold\"),\n        axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 0.5))\n\n\nFor easier comparison, we shall combine the 2 plots together for better visualization.\n\nexpenses_wage <- p_expense + p_meanwage + plot_layout(heights = c(80, 50)) \nexpenses_wage\n\n\n\n\nLooking at the expenses over time plot above, it showed that education, food and shelter remained stable over time, which meant these costs are most likely fixed despite any wage fluations. Recreation expenses, on the hand, is high in March and decreases significantly from March 2022 to April 2022 and plateaus to a stable rate thereafter.\nLooking at the wage over time plot, we can see that in March, the mean income is at its peak in March 2022 and dips significantly in April 2022. April 2022 onwards, the income remains relatively stable and starts to increase slightly in August 2022, but in Han 2023 it start to decrease further. The fluctuations in the financial health and income is directly proportionate. And we can also see that, recreation expenses increases when there is an increase in income but remain low when income is low.\nSince this is an agricultural city, participants’ pay could be likely to be affected by the seasons and harvest.\n\n\nWage vs Cost of Living overtime\nLooking at the wage vs cost of living, we can see that on average, most citizens can cope with their cost of living as their mean wage (blue bars) is higher than the mean cost of living (red bars). Most citizens should still have savings monthly.\n\n# Creating a table with Wage and Cost of Living by month_year\n\n# Group the data by month and find the corresponding means\ndf_monthly <- combined_table %>%\n  group_by(month_year) %>%\n  summarise(mean_income = mean(Wage),\n            mean_cost_of_living = mean(Cost_of_living))\n# Melt the data frame to create a long format\ndf_monthly_melt <- melt(df_monthly, id.vars = \"month_year\", variable.name = \"variable\", value.name = \"value\")\n\n\n\nShow the code\n# Plot using ggplot2\nggplot(df_monthly_melt, aes(x = month_year, y = value, fill = variable)) +\n  geom_bar(stat = \"identity\", position = position_dodge(width = 25), alpha = 0.7) +\n  scale_fill_manual(name = \"Legend\", values = c(\"mean_income\" = \"blue\", \"mean_cost_of_living\" = \"red\")) +\n  labs(x = \"Month\", y = \"Mean\", title = \"Monthly Mean Income and Cost of Living\") +\n  scale_x_date(guide = guide_axis(angle = 45)) +\n  theme(axis.text.x = element_text(hjust = 0.4, vjust = 0.5, size = 5)) \n\n\n\n\n\n\n\n\n4.1.3 Observation on Education Level\n\nEducation affects financial health and birth rate\nTo see if education affects financial health and birth rate, we will create the boxplot as shown below.\n\n\nShow the code\n# Create a factor with the education levels in the desired order\nedu_levels <- c(\"Low\", \"HighSchoolOrCollege\", \"Bachelors\", \"Graduate\")\ncombined_table$educationLevel <- factor(combined_table$educationLevel, levels = edu_levels)\n\n# Create a box plot with separate panels for individuals with and without kids\np_fh_kids <- ggplot(combined_table, aes(x = educationLevel, y = Financial_health, fill = haveKids)) +\n  geom_boxplot() +\n  stat_summary(aes(group = haveKids, color = haveKids), fun = mean, geom = \"line\", size = 0.5) + # add mean lines\n  stat_boxplot(geom='errorbar', width=0.1, coef=1.5, size=0.5) + # add error bars\n  scale_fill_manual(name = \"haveKids\", values = c(\"FALSE\" = \"grey\", \"TRUE\" = \"orange\")) +\n  labs(title = \"Boxplot of Financial Health and Education by Kids\", x = \"Education\", y = \"Financial Health\") +\n  facet_wrap(~haveKids, ncol = 2) +\n  theme_bw() +\n  theme(plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)) \n\n# Display the plot\nggplotly(p_fh_kids)\n\n\n\n\n\n\nWe observe here that education is positively correlated to wage and financial health of the citizens. The higher the education level, the higher the financial health. Also, we can see that citizen with kids tend to have better financial health overall. Thus, showing that good education is necessary for higher wage.\nTo further confirm that wage is affected by education level, we will test the following null hypothesis:\nH0: the mean wage across different education levels are the same H1: the mean wage across different education levels are different\nAs based on previous normality assumption test done for wage, we know that wage is not normally distributed. Thus, to test the null hypothesis, we will perform the non-parametric test, Oneway ANOVA Test.\n\n\nShow the code\nggbetweenstats(\n  data = combined_table,\n  x = educationLevel, \n  y = Wage,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"ns\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  ylim = c(0, 25000),\n  breaks = seq(0, 25000, 5000)\n) +\nggtitle(\"Oneway ANNOVA - Income across different educationLevel\")\n\n\n\n\n\nSince the p-value < critical value of 0.05, there is statistical evidence to reject the null hypothesis. We can thus conclude that education indeed does affect one’s wage and overall the median wage is higher for higher education level, which is consistent with our findings earlier."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#income-by-age",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#income-by-age",
    "title": "Take-Home_Ex01",
    "section": "4.1.2 Income by Age",
    "text": "4.1.2 Income by Age\nLet’s find out of there if income is affected by age. When you are older, you are likely to earn more.\nTo compare the income level across ages, we will test the following null hypothesis:\nH0: the mean wage across different age groups are the same H1: the mean wage across different age groups are different\nTo start the confirmatory data analysis, we first perform the normality assumption test for the distribution of income and age. Normality assumption test has been performed previously.\nPlot the qqplot for income and age\n\n\nShow the code\n#| echo: false\n#| fig-width: 3\n#| fig-height: 3\n\n# Create age table \nunique_participants <- unique(subset(combined_table, select = c(\"participantId\", \"age\")))\nhead(unique_participants)\n\n\n   participantId age\n1              0  36\n13             1  25\n25            10  48\n37           100  29\n49          1000  56\n61          1001  49\n\n\nShow the code\nqq_age <- ggplot(unique_participants,\n       aes(sample=age))+\n  stat_qq() +\n  stat_qq_line() +\n  ggtitle(\"Normal Q-Q Plot of Age\")\n\nsw_t_age <- unique_participants %>%\n  shapiro_test(age) %>%\n  gt() #make it to gt format to give a nice table\n\ntmp_age <- tempfile(fileext = '.png')\ngtsave(sw_t_age, tmp_age)\ntable_png_age <- png::readPNG(tmp_age,native=TRUE) #sw_t cant be recognised by patchwork so change it to png\n\n(qq_age + table_png_age) / (qq + table_png)\n\n\n\n\n\nBased on the Shapiro test, both the p-value are < alpha value of 0.05, thus there is sufficient statistical evidence to conclude that the distribution of income and age are not normally distributed. Thus we will use the non-parametric test.\nOneway ANOVA Test\nTo test the null hypothesis, we performed the non-parametric test.\n\n\nShow the code\nggbetweenstats(\n  data = combined_table,\n  x = age_bin, \n  y = Wage,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"ns\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  ylim = c(0, 25000)\n) +\nggtitle(\"Oneway ANNOVA - Income across different age\")\n\n\n\n\n\nThe Kruskal-Wallis Test p-value is lower than the alpha values, thus there is sufficient statistical evidence to reject the null hypothesis and infer that the mean income across age is not the same.\nWe can observe that there are few pairs of age_bin with p-value > 0.05 such as [40,50) and [50,60]. This suggests that the differences between the medians of the pair are not statistically significant.\nWe can also observe that there is a higher wage median for those age 30-40. After the age of 40, it seems that the increase in age is not consistent with the increase in wage. The 2 highest wage level are from the opposite ends of the age spectrum. Though these are outliers, it suggests that age is not the limiting factor for high wage tier. It does not necessary mean that an individual has to be older to earn a higher income."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#financial-health-observation",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#financial-health-observation",
    "title": "Take-Home_Ex01",
    "section": "4.1.3 Financial Health Observation",
    "text": "4.1.3 Financial Health Observation\nCumulative Financial Health\nCreate a table to plot the cumulative financial health to see if there are cumulative savings in the city.\n\n# Create a data frame\ndf_totalfh <- combined_table %>%\n  group_by(month_year) %>%\n  summarise(total_fh = sum(Financial_health))\n\n#head(df_totalfh)\n\n\n\nShow the code\n# calculate cumulative financial health\ndf_totalfh <- df_totalfh %>% \n  mutate(cumulative_fh = cumsum(total_fh))\n\nhead(df_totalfh)\n\n\n# A tibble: 6 × 3\n  month_year total_fh cumulative_fh\n  <date>        <dbl>         <dbl>\n1 2022-03-01 4832812.      4832812.\n2 2022-04-01 2204851.      7037663.\n3 2022-05-01 2403220.      9440883.\n4 2022-06-01 2421291.     11862173.\n5 2022-07-01 2272492.     14134666.\n6 2022-08-01 2574129.     16708794.\n\n\nShow the code\n# Calculate y-axis breaks and labels\ny_breaks <- pretty_breaks(n = 3)(range(df_totalfh$cumulative_fh))\ny_labels <- dollar_format(prefix = \"$\")(y_breaks)\n\n# plot graph\nggplot(data = df_totalfh, aes(x = month_year, y = cumulative_fh)) +\n  geom_line() +\n  labs(x = \"Month/Year\", y = \"Cumulative Financial Health\", title = \"Cumulative Financial Health Over Time\") +\n  stat_summary(geom = \"line\", fun = \"cumsum\", linetype = \"dashed\") +\n  scale_y_continuous(breaks = y_breaks, labels = y_labels) +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%m/%Y\") +\n  theme(plot.title = element_text(face = \"bold\"),\n        plot.margin = unit(c(0.5, 0.5, 0.5, 0.5), \"cm\"))\n\n\n\n\n\nFrom the figure above, we can see that the city has cumulative savings across the months.\nDiving deeper into the financial health of the participants, we will plot the boxplot of the Financial Health vs Mean Financial Health. Based on the plot below, we can see that the mean of the financial health is at the highest in March 2022 at around $4800 and decreased significantly in April 2022. Between April 2022 to Feb 2023, financial health was maintained between $2,500 to $3,000.\n\n\nShow the code\np_fh <- ggplot(data = combined_table, aes(x = month_year, y = Financial_health, \n                                      tooltip = month_year)) +\n  geom_boxplot() +\n  geom_point(stat = \"summary\", fun.y = \"mean\", colour = \"red\", size = 1) +\n  geom_line(stat = \"summary\", fun.y = \"mean\", colour = \"red\", size = 0.5) +\n  theme_minimal() +\n  scale_fill_brewer(palette = \"Dark2\") +\n  labs(title = \"Financial Health Over Time\",\n       y = \"Financial Health\",\n       x = \"Month/Year\") +\n  theme(plot.title = element_text(hjust = 0.2, size = 12, face = 'bold'),\n        plot.margin = margin(20, 20, 20, 20),\n        legend.position = \"bottom\",\n        axis.text = element_text(size = 8, face = \"bold\"),\n        axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 1),\n        axis.title.x = element_text(hjust = 0.5, size = 12, face = \"bold\"),\n        axis.title.y = element_text(hjust = 0.5, size = 12, face = \"bold\")) +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%b-%Y\")\n\nggplotly(p_fh, tooltip = c(\"x\", \"y\", \"tooltip\"))\n\n\n\n\n\n\nTo find out if financial health is affected by wage or cost of living, we will plot the correlation table matrix of financial health, wage, cost of living and the various expense category. Based on the correlation table and the significant test of correlation, we can see that financial health and wage has a strongly positive correlation of 0.98 , while cost of living has low negative correlation of -0.14.\nBased on the correlogram below, we can also observe that there Recreation and Shelter has a high correlation with Cost of living.\n\n\nShow the code\n# Select columns by name for the correlation matrix\ncols <- c( \"Wage\", \"Financial_health\", \"Cost_of_living\", \"Food\", \"Shelter\", \"Recreation\", \"Education\", \"RentAdjustment\")\n\n# Plot the ggcorrmat\nggstatsplot::ggcorrmat(\n  data = combined_table, \n  cor.vars = cols, hc.order = TRUE, p.mat=p.mat,\n  title = \"Financial Health Correlation Table\")\n\n\n\n\n\n\nWage CorrelationCost of Living Correlation\n\n\n\n\nShow the code\nggscatterstats(\n  data = combined_table,\n  x = Wage,\n  y = Financial_health,\n  marginal = FALSE,\n  )\n\n\n\n\n\n\n\n\n\nShow the code\nggscatterstats(\n  data = combined_table,\n  x = Cost_of_living,\n  y = Financial_health,\n  marginal = FALSE,\n  )\n\n\n\n\n\n\n\n\nTo further explore each expense category over time, we will plot the different expense category over time.\n\n\nShow the code\n# group the expenses by month year\nexpenses_grouped <- combined_table %>%\n  group_by(month_year) %>%\n  summarize(total_recreation = mean(Recreation),\n            total_food = mean(Food),\n            total_shelter = mean(Shelter),\n            total_education = mean(Education))\n\n# plot the data using ggplot2\np_expense <- ggplot(expenses_grouped, aes(x = month_year)) + \n  geom_line(aes(y = total_recreation, color = \"Recreation\")) +\n  geom_line(aes(y = total_food, color = \"Food\")) +\n  geom_line(aes(y = total_shelter, color = \"Shelter\")) +\n  geom_line(aes(y = total_education, color = \"Education\")) +\n  labs(x = \"Month/Year\", y = \"Mean Expenses($)\") +\n  scale_y_continuous(limits = c(-1000, 0), \n                      breaks = seq(-1000, 0, 2*100),\n                      labels = dollar_format(prefix = \"$\")) +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%m/%Y\") +\n  ggtitle(\"Expenses Over time\") +\n  scale_color_manual(values = c(\"Recreation\" = \"red\", \n                                \"Food\" = \"blue\", \n                                \"Shelter\" = \"green\", \n                                \"Education\" = \"purple\")) +\n  theme(plot.title = element_text(face = \"bold\"),\n        axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 0.5)) \n\n\nAlso, we shall plot the wage over time to compare it with the expenses over time plot.\n\n\nShow the code\n# group the wage by month year\nwage_grouped <- combined_table %>%\n  group_by(month_year) %>%\n  summarize(mean_wage_bymonth = mean(Wage))\n\n# plot the data using ggplot2\np_meanwage <- ggplot(wage_grouped, aes(x = month_year)) + \n  geom_line(aes(y = mean_wage_bymonth)) +\n  labs(x = \"Month/Year\", y = \"Mean Wage($)\") +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%m/%Y\") +\n  ggtitle(\"Expenses by Month/Year\") +\n  theme(plot.title = element_text(face = \"bold\"),\n        axis.text.x = element_text(angle = 45, vjust = 0.5, hjust = 0.5))\n\n\nFor easier comparison, we shall combine the 2 plots together for better visualization.\n\nexpenses_wage <- p_expense + p_meanwage + plot_layout(heights = c(80, 50)) \nexpenses_wage\n\n\n\n\nLooking at the expenses over time plot above, it showed that education, food and shelter remained stable over time, which meant these costs are most likely fixed despite any wage fluations. Recreation expenses, on the hand, is high in March and decreases significantly from March 2022 to April 2022 and plateaus to a stable rate thereafter.\nLooking at the wage over time plot, we can see that in March, the mean income is at its peak in March 2022 and dips significantly in April 2022. April 2022 onwards, the income remains relatively stable and starts to increase slightly in August 2022, but in Han 2023 it start to decrease further. The fluctuations in the financial health and income is directly proportionate. And we can also see that, recreation expenses increases when there is an increase in income but remain low when income is low.\nSince this is an agricultural city, participants’ pay could be likely to be affected by the seasons and harvest.\n\n# expenses_grouped <- combined_table %>%\n#   group_by(month_year) %>%\n#   summarize(total_recreation = mean(Recreation),\n#             total_food = mean(Food),\n#             total_shelter = mean(Shelter),\n#             total_education = mean(Education)) %>% \n#   pivot_longer(cols = c(total_recreation, total_food, total_shelter, total_education), names_to = \"expense_type\", values_to = \"expense\")\n# head(expenses_grouped)\n\n#CHECK WHY CANT PLOT\n\n # ggplot(data = expenses_grouped, aes(x = expense, y = expense_type, fill = after_stat(x))) +\n #   \n #   geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01) +\n #  \n #   theme_minimal() +\n #  \n #     labs(title = 'Expenses by Category Over Time: {frame_time}',\n #        y = \"Type of Expense\",\n #        x = \"Total Expense\") +\n #   \n #   theme(legend.position=\"none\",\n #   text = element_text(family = \"Garamond\"),\n #   plot.title = element_text(face = \"bold\", size = 12),\n #   \n #   axis.title.x = element_text(size = 10, hjust = 1),\n #   axis.title.y = element_text(size = 10),\n #   axis.text = element_text(size = 8)) +\n #   \n #   scale_fill_viridis(name = \"expense\", option = \"D\") +\n # \n #   transition_time(\"month_year\") +\n #   ease_aes('linear')\n\nWage vs Cost of Living overtime\n\n# Creating a table with Wage and Cost of Living by month_year\n\n# Group the data by month and find the corresponding means\ndf_monthly <- combined_table %>%\n  group_by(month_year) %>%\n  summarise(mean_income = mean(Wage),\n            mean_cost_of_living = mean(Cost_of_living))\n# Melt the data frame to create a long format\ndf_monthly_melt <- melt(df_monthly, id.vars = \"month_year\", variable.name = \"variable\", value.name = \"value\")\n\n#CHECK FOR THE XAXIS SCALE\n\n\nShow the code\n# Plot using ggplot2\nggplot(df_monthly_melt, aes(x = month_year, y = value, fill = variable)) +\n  geom_bar(stat = \"identity\", position = position_dodge(width = 25), alpha = 0.7) +\n  scale_fill_manual(name = \"Legend\", values = c(\"mean_income\" = \"blue\", \"mean_cost_of_living\" = \"red\")) +\n  labs(x = \"Month\", y = \"Mean\", title = \"Monthly Mean Income and Cost of Living\") +\n  scale_x_date(guide = guide_axis(angle = 45))\n\n\n\n\n\nShow the code\n  theme(axis.text.x = element_text(hjust = 0.4, vjust = 0.5, size = 5)) \n\n\nList of 1\n $ axis.text.x:List of 11\n  ..$ family       : NULL\n  ..$ face         : NULL\n  ..$ colour       : NULL\n  ..$ size         : num 5\n  ..$ hjust        : num 0.4\n  ..$ vjust        : num 0.5\n  ..$ angle        : NULL\n  ..$ lineheight   : NULL\n  ..$ margin       : NULL\n  ..$ debug        : NULL\n  ..$ inherit.blank: logi FALSE\n  ..- attr(*, \"class\")= chr [1:2] \"element_text\" \"element\"\n - attr(*, \"class\")= chr [1:2] \"theme\" \"gg\"\n - attr(*, \"complete\")= logi FALSE\n - attr(*, \"validate\")= logi TRUE\n\n\nLooking at the wage vs cost of living, we can see that on average, most citizens can cope with their cost of living as their mean wage (blue bars) is higher than the mean cost of living (red bars). Most citizens should still have savings monthly."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#observation-on-education-level",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#observation-on-education-level",
    "title": "Take-Home_Ex01",
    "section": "4.1.3 Observation on Education Level",
    "text": "4.1.3 Observation on Education Level\nEducation affects financial health and birth rate\nTo see if education affects financial health and birth rate, we will create the boxplot as shown below.\n\n\nShow the code\n# Create a factor with the education levels in the desired order\nedu_levels <- c(\"Low\", \"HighSchoolOrCollege\", \"Bachelors\", \"Graduate\")\ncombined_table$educationLevel <- factor(combined_table$educationLevel, levels = edu_levels)\n\n# Create a box plot with separate panels for individuals with and without kids\np_fh_kids <- ggplot(combined_table, aes(x = educationLevel, y = Financial_health, fill = haveKids)) +\n  geom_boxplot() +\n  stat_summary(aes(group = haveKids, color = haveKids), fun = mean, geom = \"line\", size = 0.5) + # add mean lines\n  stat_boxplot(geom='errorbar', width=0.1, coef=1.5, size=0.5) + # add error bars\n  scale_fill_manual(name = \"haveKids\", values = c(\"FALSE\" = \"grey\", \"TRUE\" = \"orange\")) +\n  labs(title = \"Boxplot of Financial Health and Education by Kids\", x = \"Education\", y = \"Financial Health\") +\n  facet_wrap(~haveKids, ncol = 2) +\n  theme_bw() +\n  theme(plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)) \n\n# Display the plot\nggplotly(p_fh_kids)\n\n\n\n\n\n\nWe observe here that education is positively correlated to wage and financial health of the citizens. The higher the education level, the higher the financial health. Also, we can see that citizen with kids tend to have better financial health overall. Thus, showing that good education is necessary for higher wage.\nTo further confirm that wage is affected by education level, we will test the following null hypothesis:\nH0: the mean wage across different education levels are the same H1: the mean wage across different education levels are different\nAs based on previous normality assumption test done for wage previously, we know that wage is not normally distributed. Thus, to test the null hypothesis, we will perform the non-parametric test.\nOneway ANOVA Test\n\n\nShow the code\nggbetweenstats(\n  data = combined_table,\n  x = educationLevel, \n  y = Wage,\n  type = \"np\",\n  mean.ci = TRUE, \n  pairwise.comparisons = TRUE, \n  pairwise.display = \"ns\",\n  p.adjust.method = \"fdr\",\n  messages = FALSE,\n  ylim = c(0, 25000),\n  breaks = seq(0, 25000, 5000)\n) +\nggtitle(\"Oneway ANNOVA - Income across different educationLevel\")\n\n\n\n\n\nSince the p-value < critical value of 0.05, there is statistical evidence to reject the null hypothesis. We can thus conclude that education indeed does affect one’s wage and overall the median wage is higher for higher education level, which is consistent with our findings earlier."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#observation-on-joviality",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#observation-on-joviality",
    "title": "Take-Home_Ex01",
    "section": "4.2 Observation on Joviality",
    "text": "4.2 Observation on Joviality\nTo find out the factors that could possibly affect joviality, we plot the below correlogram. However, looking at the plot below, we can see that none of the factors have correlation more than 0.5. Joviality has a negative correlation relationship with wage, expense, and savings.\n\n\nShow the code\n# Select columns by name for the correlation matrix\ncols <- c(\"joviality\", \"Wage\", \"Financial_health\", \"Cost_of_living\", \"age\", \"householdSize\")\n\n# Plot the ggcorrmat\nggstatsplot::ggcorrmat(\n  data = combined_table, \n  cor.vars = cols, hc.order = TRUE, p.mat=p.mat,\n  title = \"Joviality Correlation Table\")\n\n\n\n\n\n\n4.2.1 Joviality is affected by Financial health\nEven though correlation between joviality is weak (-0.35), we can observe the smooth red curve is relatively different across different income levels. It appears joviality has a strong correlation for lower income levels as compaeed to the rich. when broken down in health levels, it appears that joviality has the lowest correlation for middle income, the R2= 0.006.\nHowever, we also observed that there are poor people who have the highest joviality of 0.90 whereas for the income earners (in red), all of them have a joviality score below 0.64. Thus, we can conclude that being rich does not necessarily make citizens happy.\n\n\nShow the code\n# Create the plot\np_j <- ggplot(combined_table, aes(x = Financial_health, y = joviality, color = Wage)) +\n  geom_point() + # Scatter plot\n  geom_smooth(method = \"loess\", se = FALSE, colour = \"red\") + # Add smoother\n  scale_y_continuous(limits = c(0, 1)) + # Set Y-axis limits to 0-1\n  scale_color_gradient(low = \"blue\", high = \"red\") # Set color scale from blue to red\n\nggplotly(p_j)\n\n\n\n\n\n\n\n\nShow the code\nlibrary(ggpmisc)\n# Compute the 25th and 75th percentiles of Financial_health\nq <- quantile(combined_table$Financial_health, probs = c(0.25, 0.75))\n\n# Create a new column \"income_level\" based on Financial_health percentiles\ncombined_table$income_level <- ifelse(combined_table$Financial_health < q[1], \"Low\",\n                                      ifelse(combined_table$Financial_health > q[2], \"High\", \"Middle\"))\n\n# Specify the order of the income levels\ncombined_table$income_level <- factor(combined_table$income_level,\n                                      levels = c(\"Low\", \"Middle\", \"High\"))\n\n# Create the plot with facets and regression line equation\nggplot(combined_table, aes(x = Financial_health, y = joviality)) +\n  geom_point() + # Scatter plot\n  geom_smooth(method = \"lm\", se = FALSE, colour = \"red\") + # Add smoother\n  scale_y_continuous(limits = c(0, 1)) + # Set Y-axis limits to 0-1\n  facet_wrap(~ income_level) + # Create facets by income level\n  stat_poly_eq(formula = y ~ x, aes(label = paste(\"R^2 = \", round(..r.squared.., 3))),\n               parse = TRUE, label.x = \"right\", label.y = 0.9, \n               eq.with.lhs = FALSE, size = 3) + # Show R-squared only, adjust label position and decrease font size\n  theme(plot.margin = unit(c(1, 1, 1, 5), \"lines\")) # Adjust right margin to make room for equation\n\n\n\n\n\n\n\n4.2.2 Joviality is affected by Cost of Living\nTo test the significance of correlation between joviality and cost of living, the following code chunk is used, and we notice that the slight positive correlation for 0.45.\n\n\nShow the code\nggscatterstats(\n  data = combined_table,\n  x = Cost_of_living,\n  y = joviality,\n  marginal = FALSE,\n  )\n\n\n\n\n\n\nJoviality vs expense_category\nWe can see that food expenses has the highest correlation at 0.49. Thus, the city planners and managers can consider allocating a portion of the grant to food expenses.\n\n\nShow the code\n# Select columns by name for the correlation matrix\ncols <- c(\"joviality\", \"Food\", \"Education\", \"Shelter\", \"Recreation\")\n\n# Plot the ggcorrmat\nggstatsplot::ggcorrmat(\n  data = combined_table, \n  cor.vars = cols, hc.order = TRUE, p.mat=p.mat,\n  title = \"Joviality Correlation Table\")\n\n\n\n\n\n\n\nShow the code\n# Select only the columns of interest from combined_table\ndata_reg <- select(combined_table, Shelter, Food, Education, Recreation, joviality)\n\ndata_reg <- data_reg %>%\n  mutate_at(vars(Shelter, Food, Education, Recreation), abs)\n\n# Melt data into long format\ndata_reg <- reshape2::melt(data_reg, id.vars = \"joviality\")\n\n#Create plot with multiple regression lines\n\nggplot(data_reg, aes(x = value, y = joviality, color = variable)) +\n  geom_point(size = 0.25) +\n  geom_smooth(method = \"lm\", formula = y ~ x, se = FALSE, aes(group = variable)) +\n  xlab(\"Expenses_type\") +\n  ylab(\"Joviality\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#joviality-is-affected-by-financial-health",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#joviality-is-affected-by-financial-health",
    "title": "Take-Home_Ex01",
    "section": "4.2.1 Joviality is affected by Financial health",
    "text": "4.2.1 Joviality is affected by Financial health\n\n\nShow the code\n# Create the plot\nggplot(combined_table, aes(x = Financial_health, y = joviality)) +\n  geom_point() + # Scatter plot\n  geom_smooth(method = \"loess\", se = FALSE, colour = \"red\") + # Add smoother\n  scale_y_continuous(limits = c(0, 1)) # Set Y-axis limits to 0-1\n\n\n\n\n\n\n\nShow the code\nlibrary(ggpmisc)\n# Compute the 25th and 75th percentiles of Financial_health\nq <- quantile(combined_table$Financial_health, probs = c(0.25, 0.75))\n\n# Create a new column \"income_level\" based on Financial_health percentiles\ncombined_table$income_level <- ifelse(combined_table$Financial_health < q[1], \"Low\",\n                                      ifelse(combined_table$Financial_health > q[2], \"High\", \"Middle\"))\n\n# Specify the order of the income levels\ncombined_table$income_level <- factor(combined_table$income_level,\n                                      levels = c(\"Low\", \"Middle\", \"High\"))\n\n# Create the plot with facets and regression line equation\nggplot(combined_table, aes(x = Financial_health, y = joviality)) +\n  geom_point() + # Scatter plot\n  geom_smooth(method = \"lm\", se = FALSE, colour = \"red\") + # Add smoother\n  scale_y_continuous(limits = c(0, 1)) + # Set Y-axis limits to 0-1\n  facet_wrap(~ income_level) + # Create facets by income level\n  stat_poly_eq(formula = y ~ x, aes(label = paste(\"R^2 = \", round(..r.squared.., 3))),\n               parse = TRUE, label.x = \"right\", label.y = 0.9, \n               eq.with.lhs = FALSE, size = 3) + # Show R-squared only, adjust label position and decrease font size\n  theme(plot.margin = unit(c(1, 1, 1, 5), \"lines\")) # Adjust right margin to make room for equation\n\n\n\n\n\nEven though correlation between joviality is weak (-0.35), we can observe the smooth red curve is relatively different across different wage levels. It appears joviality has a strong correlation for lower income levels as compared to the rich. When we break down the financial health levels into different quantiles, it appears that joviality has the lowest correlation for middle income, the R2= 0.006.\nThus, we it tells us that being rich does not necessarily make citizens happy."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#joviality-is-affected-by-cost-of-living",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#joviality-is-affected-by-cost-of-living",
    "title": "Take-Home_Ex01",
    "section": "4.2.2 Joviality is affected by Cost of Living",
    "text": "4.2.2 Joviality is affected by Cost of Living\nTo test the significance of correlation between joviality and cost of living, the following code chunk is used, and we notice that the slight positive correlation for 0.45.\n\n\nShow the code\nggscatterstats(\n  data = combined_table,\n  x = Cost_of_living,\n  y = joviality,\n  marginal = FALSE,\n  )\n\n\n\n\n\nJoviality vs expense_category\n\n\nShow the code\n# Select columns by name for the correlation matrix\ncols <- c(\"joviality\", \"Food\", \"Education\", \"Shelter\", \"Recreation\")\n\n# Plot the ggcorrmat\nggstatsplot::ggcorrmat(\n  data = combined_table, \n  cor.vars = cols, hc.order = TRUE, p.mat=p.mat,\n  title = \"Joviality Correlation Table\")\n\n\n\n\n\n\n\nShow the code\n# combined_table %>% \n#   select(joviality, Education, Food, Shelter, Recreation) %>% \n#   ggscatterstats(\n#     formula = joviality ~ Education + Food + Shelter + Recreation, \n#     marginal = \"density\",\n#     method.args = list(color = \"variable\"), \n#     group = \"variable\"\n#   )\n\n\nWe can see that food expenses has the highest correlation at 0.49. Thus, the city planners and managers can consider allocating a portion of the grant to food expenses."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualising-uncertainty-of-point-estimates",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualising-uncertainty-of-point-estimates",
    "title": "Take-Home_Ex01",
    "section": "4.3.1 Visualising uncertainty of point estimates",
    "text": "4.3.1 Visualising uncertainty of point estimates\nIt can be tempting to interpret point estimates like median as the true precise representation of the true data value. However, it should be noted that there are uncertainties surrounding these point estimates. Thus we want to show the target quantile confidence lvels (95% or 99%) that the true (unknown) estimate would like within the interval, given evidence provided by observed data.\nAs can been seen from the age_bin plot below, some age_bin have higher uncertainties such as age_bin [20,30) and [50,60]. This could be due to the presence of large no of outliers, and probably at the stage of the deciding their career path. On the other hand, age_bin such as [18,20) has less uncertainties,which may indicate lower presence of outliers.\nLikewise, for the educationLevel plot below, low level education has less uncertainties, while the higher educationLevel, the higher the uncertainties get.\n\nAge_bineducationLevel\n\n\n\n\nShow the code\n#Base ggplot\nggplot(\n  data = combined_table,\n  aes(x = age_bin,\n      y = Wage)) +\n  \n#Using stat_pointinterval to plot the points and intervals\n  stat_pointinterval(\n    aes(interval_color = stat(level)),\n    .width = c(0.95, 0.99),\n    .point = median,\n    .interval = qi,\n    point_color = \"darkred\",\n    show.legend = FALSE) +\n\n#Defining the color of the intervals \n  scale_color_manual(\n    values = c(\"blue2\", \"darkblue\"),\n    aesthetics = \"interval_color\") +\n  \n#Title, subtitle, and caption\n  labs(title = 'Visualising uncertainty in median estimates of wage by age_bin',\n  subtitle = 'Quantiles intervals (95% and 99%) of wage by age_bin',\n  x = \"age_bin\",\n  y = \"Wage\") +\n  \n  theme_hc() +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 18),\n        plot.subtitle = element_text(size = 14),\n        axis.text.x = element_text(angle = 30, hjust = 1))\n\n\n\n\n\n\n\n\n\nShow the code\n#Base ggplot\nggplot(\n  data = combined_table,\n  aes(x = educationLevel,\n      y = Wage)) +\n  \n#Using stat_pointinterval to plot the points and intervals\n  stat_pointinterval(\n    aes(interval_color = stat(level)),\n    .width = c(0.95, 0.99),\n    .point = median,\n    .interval = qi,\n    point_color = \"darkred\",\n    show.legend = FALSE) +\n\n#Defining the color of the intervals \n  scale_color_manual(\n    values = c(\"blue2\", \"darkblue\"),\n    aesthetics = \"interval_color\") +\n  \n#Title, subtitle, and caption\n  labs(title = 'Visualising uncertainty in median estimates of wage by educationLevel',\n  subtitle = 'Quantiles intervals (95% and 99%) of wage by educationLevel',\n  x = \"educationLevel\",\n  y = \"Wage\") +\n  \n  theme_hc() +\n  \n  theme(plot.title = element_text(face = \"bold\", size = 18),\n        plot.subtitle = element_text(size = 14),\n        axis.text.x = element_text(angle = 30, hjust = 1))"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualising-uncertainty-with-hypothetical-outcome-plots-hops",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualising-uncertainty-with-hypothetical-outcome-plots-hops",
    "title": "Take-Home_Ex01",
    "section": "4.3.2 Visualising Uncertainty with Hypothetical Outcome Plots (HOPs)",
    "text": "4.3.2 Visualising Uncertainty with Hypothetical Outcome Plots (HOPs)\n\nAge_bineducationLevel\n\n\n\n\nShow the code\n# ggplot(data = combined_table, \n#        (aes(x = factor(age_bin), y = Wage))) +\n#   geom_point(position = position_jitter(\n#     height = 0.3, width = 0.05), \n#     size = 0.4, color = \"#0072B2\", alpha = 1/2) +\n#   geom_hpline(data = sampler(25, group = age_bin), height = 0.6, color = \"#D55E00\") +\n#   theme_bw() + \n#   # `.draw` is a generated column indicating the sample draw\n#   transition_states(.draw, 1, 3)\n\n\n\n\n\n\nShow the code\n# ggplot(data = combined_table, \n#        (aes(x = factor(educationLevel), y = Wage))) +\n#   geom_point(position = position_jitter(\n#     height = 0.3, width = 0.05), \n#     size = 0.4, color = \"#0072B2\", alpha = 1/2) +\n#   geom_hpline(data = sampler(25, group = educationLevel), height = 0.6, color = \"#D55E00\") +\n#   theme_bw() + \n#   # `.draw` is a generated column indicating the sample draw\n#   transition_states(.draw, 1, 3)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Visual Analytics and Application Learning Journey",
    "section": "",
    "text": "Welcome to ISSS608 Visual Analytics and Applications.\nIn this website, you will find my coursework prepared for this course.\nHope you enjoy reading them!\nMost Recent Submissions…\n\n\n\n\n\n\n\n\n\n\n\nHands-on Ex 5: Network Data Visualisation and Analysis\n\n\n\n\n\n\nDabbie Neo\n\n\nMay 13, 2023\n\n\n\n\n\n\n\n\n\n\n\nJsonlite\n\n\n\n\n\n\nDabbie Neo\n\n\nMay 13, 2023\n\n\n\n\n\n\n\n\n\n\n\nIn-Class Exercise 4\n\n\n\n\n\n\nDabbie Neo\n\n\nMay 6, 2023\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#observation-on-interest-groups",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#observation-on-interest-groups",
    "title": "Take-Home_Ex01",
    "section": "4.3 Observation on Interest Groups",
    "text": "4.3 Observation on Interest Groups\nWe can plot the histogram below to observe the distribution of the different interest interest group. As seen from below, there is roughly the same proportion of participants in each group.\n\n\nShow the code\ncombined_table_grp <- combined_table %>% \n  group_by(participantId) %>%\n  summarise(interestGroup = first(interestGroup), age_bin = first(age_bin)) # assuming interestGroup and age_bin are constant for each participantID\n\nggplot(data = combined_table_grp, aes(x = interestGroup)) + \n  stat_count(color=\"black\", fill=\"azure4\") + \n  labs(x = \"Interest Groups\", y = \"Number of participants\") +\n  ggtitle(\"Distribution of interest groups\") +\n  geom_text(stat = \"count\", aes(label=..count..), vjust=-0.5) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\nFurthermore, we can use the heatmap to have overall glimpse of the interest groups by age_bin to see if it affects the type of interest participants are in.\nFrom the heatmap below, we can see that there is a high proportion of age_bin [30,40) that are in Interest Group H.\n\n\nShow the code\n#Group the data by interest group and age bin, and count the number of participants\n\ndf_heatmap <- combined_table_grp %>% \n  group_by(interestGroup, age_bin) %>% \n  summarize(n = n()) %>% \n  ungroup()\n\n# Create a heatmap\nggplot(data = df_heatmap, aes(x = interestGroup, y = age_bin, fill = n)) +\n  geom_tile() +\n  scale_fill_gradientn(colors = c(\"lightblue\", \"red\"), na.value = \"white\") +\n  labs(x = \"Interest Group\", y = \"Age Bin\", fill = \"Number of Participants\") +\n  ggtitle(\"Heatmap of Participants by Interest Group and Age\") +\n  theme(plot.title = element_text(hjust = 0.5))"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualizing-uncertainty",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualizing-uncertainty",
    "title": "Take-Home_Ex01",
    "section": "4.4 Visualizing uncertainty",
    "text": "4.4 Visualizing uncertainty\n\n4.4.1 Visualizing uncertainty of point estimates\nIt can be tempting to interpret point estimates like median as the true precise representation of the true data value. However, it should be noted that there are uncertainties surrounding these point estimates. Thus we want to show the target quantile confidence levels (95% or 99%) that the true (unknown) estimate would like within the interval, given evidence provided by observed data.\nAs can been seen from the age_bin plot below, some age_bin have higher uncertainties such as age_bin [20,30) and [50,60]. This could be due to the presence of large no of outliers, and probably at the stage of the deciding their career path. On the other hand, age_bin such as [18,20) has less uncertainties,which may indicate lower presence of outliers.\nLikewise, for the educationLevel plot below, low level education has less uncertainties, while the higher educationLevel, the higher the uncertainties get.\n\nAge_bineducationLevel\n\n\n\n\nShow the code\n#Base ggplot\nggplot(data = combined_table,\n  aes(x = age_bin,\n      y = Wage)) +\n\n#Using stat_pointinterval to plot the points and intervals\n  stat_pointinterval(\n    aes(interval_color = stat(level)),\n    .width = c(0.95, 0.99),\n    .point = median,\n    .interval = qi,\n    point_color = \"darkred\",\n    show.legend = FALSE) +\n\n#Defining the color of the intervals\n  scale_color_manual(\n    values = c(\"blue2\", \"darkblue\"),\n    aesthetics = \"interval_color\") +\n\n#Title, subtitle, and caption\n  labs(title = 'Visualising uncertainty in median estimates of wage by age_bin',\n  subtitle = 'Quantiles intervals (95% and 99%) of wage by age_bin',\n  x = \"age_bin\",\n  y = \"Wage\") +\n\n  theme_hc() +\n\n  theme(plot.title = element_text(face = \"bold\", size = 18),\n        plot.subtitle = element_text(size = 14),\n        axis.text.x = element_text(angle = 30, hjust = 1))\n\n\n\n\n\n\n\n\n\nShow the code\n#Base ggplot\nggplot(\n  data = combined_table,\n  aes(x = educationLevel,\n      y = Wage)) +\n\n#Using stat_pointinterval to plot the points and intervals\n  stat_pointinterval(\n    aes(interval_color = stat(level)),\n    .width = c(0.95, 0.99),\n    .point = median,\n    .interval = qi,\n    point_color = \"darkred\",\n    show.legend = FALSE) +\n\n#Defining the color of the intervals\n  scale_color_manual(\n    values = c(\"blue2\", \"darkblue\"),\n    aesthetics = \"interval_color\") +\n\n#Title, subtitle, and caption\n  labs(title = 'Visualising uncertainty in median estimates of wage by educationLevel',\n  subtitle = 'Quantiles intervals (95% and 99%) of wage by educationLevel',\n  x = \"educationLevel\",\n  y = \"Wage\") +\n\n  theme_hc() +\n\n  theme(plot.title = element_text(face = \"bold\", size = 18),\n        plot.subtitle = element_text(size = 14),\n        axis.text.x = element_text(angle = 30, hjust = 1))\n\n\n\n\n\n\n\n\n\n\n4.4.2 Visualizing Uncertainty with Hypothetical Outcome Plots (HOPs)\nHPOs can help to illustrate the uncertainty and variability of the data and model predictions, and highlight the potential impact of different variables or factors on the outcomes of interest.\n\nAge_bineducationLevel\n\n\n\n\nShow the code\n# library(ungeviz)\n# \n# ggplot(data = combined_table,\n#         (aes(x = factor(age_bin), y = Wage))) +\n#    geom_point(position = position_jitter(\n#      width = 0.05, height = 0.3),\n#      size = 0.4, color = \"#0072B2\", alpha = 1/2) +\n#    geom_hpline(data = sampler(25, group = age_bin), height = 0.6, color = \"#D55E00\") +\n#    theme_bw() +\n#   transition_states(.draw, 1, 3)\n\n\n\n\n\n\nShow the code\n# ggplot(data = combined_table,\n#         aes(x = factor(educationLevel), y = Wage)) +\n#    geom_point(position = position_jitter(\n#      width = 0.05, height = 0.3),\n#      size = 0.4, color = \"#0072B2\", alpha = 1/2) +\n#    geom_hpline(data = sampler(25, group = educationLevel), height = 0.6, color = \"#D55E00\") +\n#    theme_bw() +\n#    transition_states(.draw, 1, 3)"
  }
]